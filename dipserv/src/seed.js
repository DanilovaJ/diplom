const { Pool } = require('pg');

const pool = new Pool({
  connectionString: 'postgres://xplbjqvf:8Hl5Gf6xEZ5KvLuBLfhPs0d5n563ULlx@kandula.db.elephantsql.com/xplbjqvf',
});

pool.query(`
	drop table if exists ticket;
	drop table if exists session;
	drop table if exists place;
	drop table if exists users;
	drop table if exists house;

	create table house (
		id varchar(128) primary key,
		name varchar(128) not null
	);

	create table users (
		id serial PRIMARY KEY,
		login varchar(128) not null,
		name varchar(128) not null,
		second_name varchar(128) not null,
		password varchar(128) not null,
		role varchar(8) not null,
		house_id varchar(128) not null references house(id),
		room integer
	);

	create table place (
		id varchar(128) primary key,
		name varchar(128) not null,
		house_id varchar(128) not null references house(id),
		students_limit integer not null
	);

	create table session (
		id serial PRIMARY key,
		weekday varchar(3) not null,
		time time not null,
		place_id varchar(128) not null references place(id)
	);

	create table ticket (
		id serial primary key,
		user_id integer not null references users(id) on delete cascade,
		place_id varchar(128) not null references place(id) on delete cascade,
		date date not null,
		time time not null,
		status varchar(32) not null
	);

	insert into house(id, name) values 
		('msg', 'МСГ'), 
		('house_8', 'Общежитие 8');

	insert into users(login, name, second_name, password, role, house_id, room) values
		('admin1', 'Админ', 'МСГ', '1111', 'ADMIN', 'msg', null),
		('admin2', 'Админ', '8', '1111', 'ADMIN', 'house_8', null),
		('vlad', 'Влад', 'Авсеев', '1111', 'STUDENT', 'msg', 1),
		('valya', 'Валя', 'Сильченко', '1111', 'STUDENT', 'msg', 2),
		('julia', 'Юля', 'Данилова', '1111', 'STUDENT', 'msg', 3),
		('nastya', 'Настя', 'Рындыч', '1111', 'STUDENT', 'msg', 4),
		('artem', 'Артем', 'Зеньков', '1111', 'STUDENT', 'house_8', 5),
		('sasha1', 'Саша', 'Маркуш', '1111', 'STUDENT', 'house_8', 6),
		('sasha2', 'Саша', 'Кухтеня', '1111', 'STUDENT', 'house_8', 7),
		('nazar', 'Назар', 'Шатило', '1111', 'STUDENT', 'house_8', 8);

	insert into place(id, name, house_id, students_limit) values 
		('msg_gym', 'Тренажёрный зал', 'msg', 50), 
		('msg_swimming_pool', 'Бассейн', 'msg', 50),
		('msg_stretching', 'Стрэтчинг', 'msg', 20),
		('msg_box', 'Бокс', 'msg', 20),
		('msg_flg', 'ФЛГ', 'msg', 1),
		('msg_disinsection', 'Обработка комнаты от клопов', 'msg', 1),
		('house_8_gym', 'Тренажерный зал', 'house_8', 50);

	insert into session(place_id, weekday, time) values
		('msg_gym', 'Mon', '08:00:00'),
		('msg_gym', 'Mon', '10:00:00'),
		('msg_gym', 'Mon', '12:00:00'),
		('msg_gym', 'Mon', '14:00:00'),
		('msg_gym', 'Mon', '16:00:00'),
		('msg_gym', 'Mon', '18:00:00'),
		('msg_gym', 'Mon', '20:00:00'),
		('msg_gym', 'Tue', '08:00:00'),
		('msg_gym', 'Tue', '10:00:00'),
		('msg_gym', 'Tue', '12:00:00'),
		('msg_gym', 'Tue', '14:00:00'),
		('msg_gym', 'Tue', '16:00:00'),
		('msg_gym', 'Tue', '18:00:00'),
		('msg_gym', 'Tue', '20:00:00'),
		('msg_gym', 'Wed', '08:00:00'),
		('msg_gym', 'Wed', '10:00:00'),
		('msg_gym', 'Wed', '12:00:00'),
		('msg_gym', 'Wed', '14:00:00'),
		('msg_gym', 'Wed', '16:00:00'),
		('msg_gym', 'Wed', '18:00:00'),
		('msg_gym', 'Wed', '20:00:00'),
		('msg_gym', 'Thu', '08:00:00'),
		('msg_gym', 'Thu', '10:00:00'),
		('msg_gym', 'Thu', '12:00:00'),
		('msg_gym', 'Thu', '14:00:00'),
		('msg_gym', 'Thu', '16:00:00'),
		('msg_gym', 'Thu', '18:00:00'),
		('msg_gym', 'Thu', '20:00:00'),
		('msg_gym', 'Fri', '08:00:00'),
		('msg_gym', 'Fri', '10:00:00'),
		('msg_gym', 'Fri', '12:00:00'),
		('msg_gym', 'Fri', '14:00:00'),
		('msg_gym', 'Fri', '16:00:00'),
		('msg_gym', 'Fri', '18:00:00'),
		('msg_gym', 'Fri', '20:00:00'),
		('msg_swimming_pool', 'Mon', '08:00:00'),
		('msg_swimming_pool', 'Mon', '10:00:00'),
		('msg_swimming_pool', 'Mon', '12:00:00'),
		('msg_swimming_pool', 'Mon', '14:00:00'),
		('msg_swimming_pool', 'Mon', '16:00:00'),
		('msg_swimming_pool', 'Mon', '18:00:00'),
		('msg_swimming_pool', 'Mon', '20:00:00'),
		('msg_swimming_pool', 'Tue', '08:00:00'),
		('msg_swimming_pool', 'Tue', '10:00:00'),
		('msg_swimming_pool', 'Tue', '12:00:00'),
		('msg_swimming_pool', 'Tue', '14:00:00'),
		('msg_swimming_pool', 'Tue', '16:00:00'),
		('msg_swimming_pool', 'Tue', '18:00:00'),
		('msg_swimming_pool', 'Tue', '20:00:00'),
		('msg_swimming_pool', 'Wed', '08:00:00'),
		('msg_swimming_pool', 'Wed', '10:00:00'),
		('msg_swimming_pool', 'Wed', '12:00:00'),
		('msg_swimming_pool', 'Wed', '14:00:00'),
		('msg_swimming_pool', 'Wed', '16:00:00'),
		('msg_swimming_pool', 'Wed', '18:00:00'),
		('msg_swimming_pool', 'Wed', '20:00:00'),
		('msg_swimming_pool', 'Thu', '08:00:00'),
		('msg_swimming_pool', 'Thu', '10:00:00'),
		('msg_swimming_pool', 'Thu', '12:00:00'),
		('msg_swimming_pool', 'Thu', '14:00:00'),
		('msg_swimming_pool', 'Thu', '16:00:00'),
		('msg_swimming_pool', 'Thu', '18:00:00'),
		('msg_swimming_pool', 'Thu', '20:00:00'),
		('msg_swimming_pool', 'Fri', '08:00:00'),
		('msg_swimming_pool', 'Fri', '10:00:00'),
		('msg_swimming_pool', 'Fri', '12:00:00'),
		('msg_swimming_pool', 'Fri', '14:00:00'),
		('msg_swimming_pool', 'Fri', '16:00:00'),
		('msg_swimming_pool', 'Fri', '18:00:00'),
		('msg_swimming_pool', 'Fri', '20:00:00'),
		('msg_stretching', 'Mon', '08:00:00'),
		('msg_stretching', 'Mon', '10:00:00'),
		('msg_stretching', 'Mon', '12:00:00'),
		('msg_stretching', 'Mon', '14:00:00'),
		('msg_stretching', 'Mon', '16:00:00'),
		('msg_stretching', 'Mon', '18:00:00'),
		('msg_stretching', 'Mon', '20:00:00'),
		('msg_stretching', 'Tue', '08:00:00'),
		('msg_stretching', 'Tue', '10:00:00'),
		('msg_stretching', 'Tue', '12:00:00'),
		('msg_stretching', 'Tue', '14:00:00'),
		('msg_stretching', 'Tue', '16:00:00'),
		('msg_stretching', 'Tue', '18:00:00'),
		('msg_stretching', 'Tue', '20:00:00'),
		('msg_stretching', 'Wed', '08:00:00'),
		('msg_stretching', 'Wed', '10:00:00'),
		('msg_stretching', 'Wed', '12:00:00'),
		('msg_stretching', 'Wed', '14:00:00'),
		('msg_stretching', 'Wed', '16:00:00'),
		('msg_stretching', 'Wed', '18:00:00'),
		('msg_stretching', 'Wed', '20:00:00'),
		('msg_stretching', 'Thu', '08:00:00'),
		('msg_stretching', 'Thu', '10:00:00'),
		('msg_stretching', 'Thu', '12:00:00'),
		('msg_stretching', 'Thu', '14:00:00'),
		('msg_stretching', 'Thu', '16:00:00'),
		('msg_stretching', 'Thu', '18:00:00'),
		('msg_stretching', 'Thu', '20:00:00'),
		('msg_stretching', 'Fri', '08:00:00'),
		('msg_stretching', 'Fri', '10:00:00'),
		('msg_stretching', 'Fri', '12:00:00'),
		('msg_stretching', 'Fri', '14:00:00'),
		('msg_stretching', 'Fri', '16:00:00'),
		('msg_stretching', 'Fri', '18:00:00'),
		('msg_stretching', 'Fri', '20:00:00'),
		('msg_box', 'Mon', '08:00:00'),
		('msg_box', 'Mon', '10:00:00'),
		('msg_box', 'Mon', '12:00:00'),
		('msg_box', 'Mon', '14:00:00'),
		('msg_box', 'Mon', '16:00:00'),
		('msg_box', 'Mon', '18:00:00'),
		('msg_box', 'Mon', '20:00:00'),
		('msg_box', 'Tue', '08:00:00'),
		('msg_box', 'Tue', '10:00:00'),
		('msg_box', 'Tue', '12:00:00'),
		('msg_box', 'Tue', '14:00:00'),
		('msg_box', 'Tue', '16:00:00'),
		('msg_box', 'Tue', '18:00:00'),
		('msg_box', 'Tue', '20:00:00'),
		('msg_box', 'Wed', '08:00:00'),
		('msg_box', 'Wed', '10:00:00'),
		('msg_box', 'Wed', '12:00:00'),
		('msg_box', 'Wed', '14:00:00'),
		('msg_box', 'Wed', '16:00:00'),
		('msg_box', 'Wed', '18:00:00'),
		('msg_box', 'Wed', '20:00:00'),
		('msg_box', 'Thu', '08:00:00'),
		('msg_box', 'Thu', '10:00:00'),
		('msg_box', 'Thu', '12:00:00'),
		('msg_box', 'Thu', '14:00:00'),
		('msg_box', 'Thu', '16:00:00'),
		('msg_box', 'Thu', '18:00:00'),
		('msg_box', 'Thu', '20:00:00'),
		('msg_box', 'Fri', '08:00:00'),
		('msg_box', 'Fri', '10:00:00'),
		('msg_box', 'Fri', '12:00:00'),
		('msg_box', 'Fri', '14:00:00'),
		('msg_box', 'Fri', '16:00:00'),
		('msg_box', 'Fri', '18:00:00'),
		('msg_box', 'Fri', '20:00:00'),
		('msg_flg', 'Mon', '08:00:00'),
		('msg_flg', 'Mon', '10:00:00'),
		('msg_flg', 'Mon', '12:00:00'),
		('msg_flg', 'Mon', '14:00:00'),
		('msg_flg', 'Mon', '16:00:00'),
		('msg_flg', 'Mon', '18:00:00'),
		('msg_flg', 'Mon', '20:00:00'),
		('msg_flg', 'Tue', '08:00:00'),
		('msg_flg', 'Tue', '10:00:00'),
		('msg_flg', 'Tue', '12:00:00'),
		('msg_flg', 'Tue', '14:00:00'),
		('msg_flg', 'Tue', '16:00:00'),
		('msg_flg', 'Tue', '18:00:00'),
		('msg_flg', 'Tue', '20:00:00'),
		('msg_flg', 'Wed', '08:00:00'),
		('msg_flg', 'Wed', '10:00:00'),
		('msg_flg', 'Wed', '12:00:00'),
		('msg_flg', 'Wed', '14:00:00'),
		('msg_flg', 'Wed', '16:00:00'),
		('msg_flg', 'Wed', '18:00:00'),
		('msg_flg', 'Wed', '20:00:00'),
		('msg_flg', 'Thu', '08:00:00'),
		('msg_flg', 'Thu', '10:00:00'),
		('msg_flg', 'Thu', '12:00:00'),
		('msg_flg', 'Thu', '14:00:00'),
		('msg_flg', 'Thu', '16:00:00'),
		('msg_flg', 'Thu', '18:00:00'),
		('msg_flg', 'Thu', '20:00:00'),
		('msg_flg', 'Fri', '08:00:00'),
		('msg_flg', 'Fri', '10:00:00'),
		('msg_flg', 'Fri', '12:00:00'),
		('msg_flg', 'Fri', '14:00:00'),
		('msg_flg', 'Fri', '16:00:00'),
		('msg_flg', 'Fri', '18:00:00'),
		('msg_flg', 'Fri', '20:00:00'),
		('msg_disinsection', 'Mon', '08:00:00'),
		('msg_disinsection', 'Mon', '10:00:00'),
		('msg_disinsection', 'Mon', '12:00:00'),
		('msg_disinsection', 'Mon', '14:00:00'),
		('msg_disinsection', 'Mon', '16:00:00'),
		('msg_disinsection', 'Mon', '18:00:00'),
		('msg_disinsection', 'Mon', '20:00:00'),
		('msg_disinsection', 'Tue', '08:00:00'),
		('msg_disinsection', 'Tue', '10:00:00'),
		('msg_disinsection', 'Tue', '12:00:00'),
		('msg_disinsection', 'Tue', '14:00:00'),
		('msg_disinsection', 'Tue', '16:00:00'),
		('msg_disinsection', 'Tue', '18:00:00'),
		('msg_disinsection', 'Tue', '20:00:00'),
		('msg_disinsection', 'Wed', '08:00:00'),
		('msg_disinsection', 'Wed', '10:00:00'),
		('msg_disinsection', 'Wed', '12:00:00'),
		('msg_disinsection', 'Wed', '14:00:00'),
		('msg_disinsection', 'Wed', '16:00:00'),
		('msg_disinsection', 'Wed', '18:00:00'),
		('msg_disinsection', 'Wed', '20:00:00'),
		('msg_disinsection', 'Thu', '08:00:00'),
		('msg_disinsection', 'Thu', '10:00:00'),
		('msg_disinsection', 'Thu', '12:00:00'),
		('msg_disinsection', 'Thu', '14:00:00'),
		('msg_disinsection', 'Thu', '16:00:00'),
		('msg_disinsection', 'Thu', '18:00:00'),
		('msg_disinsection', 'Thu', '20:00:00'),
		('msg_disinsection', 'Fri', '08:00:00'),
		('msg_disinsection', 'Fri', '10:00:00'),
		('msg_disinsection', 'Fri', '12:00:00'),
		('msg_disinsection', 'Fri', '14:00:00'),
		('msg_disinsection', 'Fri', '16:00:00'),
		('msg_disinsection', 'Fri', '18:00:00'),
		('msg_disinsection', 'Fri', '20:00:00'),
		('house_8_gym', 'Mon', '08:00:00'),
		('house_8_gym', 'Mon', '10:00:00'),
		('house_8_gym', 'Mon', '12:00:00'),
		('house_8_gym', 'Mon', '14:00:00'),
		('house_8_gym', 'Mon', '16:00:00'),
		('house_8_gym', 'Mon', '18:00:00'),
		('house_8_gym', 'Mon', '20:00:00'),
		('house_8_gym', 'Tue', '08:00:00'),
		('house_8_gym', 'Tue', '10:00:00'),
		('house_8_gym', 'Tue', '12:00:00'),
		('house_8_gym', 'Tue', '14:00:00'),
		('house_8_gym', 'Tue', '16:00:00'),
		('house_8_gym', 'Tue', '18:00:00'),
		('house_8_gym', 'Tue', '20:00:00'),
		('house_8_gym', 'Wed', '08:00:00'),
		('house_8_gym', 'Wed', '10:00:00'),
		('house_8_gym', 'Wed', '12:00:00'),
		('house_8_gym', 'Wed', '14:00:00'),
		('house_8_gym', 'Wed', '16:00:00'),
		('house_8_gym', 'Wed', '18:00:00'),
		('house_8_gym', 'Wed', '20:00:00'),
		('house_8_gym', 'Thu', '08:00:00'),
		('house_8_gym', 'Thu', '10:00:00'),
		('house_8_gym', 'Thu', '12:00:00'),
		('house_8_gym', 'Thu', '14:00:00'),
		('house_8_gym', 'Thu', '16:00:00'),
		('house_8_gym', 'Thu', '18:00:00'),
		('house_8_gym', 'Thu', '20:00:00'),
		('house_8_gym', 'Fri', '08:00:00'),
		('house_8_gym', 'Fri', '10:00:00'),
		('house_8_gym', 'Fri', '12:00:00'),
		('house_8_gym', 'Fri', '14:00:00'),
		('house_8_gym', 'Fri', '16:00:00'),
		('house_8_gym', 'Fri', '18:00:00'),
		('house_8_gym', 'Fri', '20:00:00');
`, (err, result) => {
  if (err) {
    console.error('Error creating database', err);
  } else {
    console.log('Database created successfully');
  }
});